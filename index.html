<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>SPECTRE Analysis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="style.css" rel="stylesheet" />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
</head>

<body>
    <header>
        <h1>SPECTRE Analysis</h1>

        <div class="toolbar">
            <!-- UMAP variant tabs act as toggles (can be none) -->
            <div class="group">
                <nav class="tabs sub" role="tablist" aria-label="UMAP variants">
                    <button id="tab-CLS" role="tab" aria-selected="true" data-tab="CLS">CLS UMAP</button>
                    <button id="tab-TANI" role="tab" aria-selected="false" data-tab="TANI">Tanimoto UMAP</button>
                </nav>
            </div>

            <div class="vsep" role="separator" aria-orientation="vertical" aria-hidden="true"></div>

            <!-- Accuracy metric tabs act as toggles (can be none) -->
            <div class="group">
                <nav class="tabs sub" role="tablist" aria-label="Accuracy metrics">
                    <button id="acc-R1" role="tab" aria-selected="false" data-acc="R1">Rank-1</button>
                    <button id="acc-MEAN" role="tab" aria-selected="false" data-acc="MEAN">Mean-rank</button>
                    <button id="acc-TANIS" role="tab" aria-selected="false" data-acc="TANIS">Tanimoto</button>
                </nav>
            </div>

            <!-- (hidden) manual loaders kept in DOM to avoid JS edits -->
            <div class="group file-controls" hidden>
                <label class="file-btn">
                    Load UMAP CSV
                    <input id="file-input-umap" type="file" accept=".csv" hidden />
                </label>
                <label class="file-btn">
                    Load Accuracy CSV
                    <input id="file-input-acc" type="file" accept=".csv" hidden />
                </label>
                <button id="use-sample-umap" title="Sample UMAP">Sample UMAP</button>
                <button id="use-sample-acc" title="Sample Accuracy">Sample Accuracy</button>
            </div>
        </div>
    </header>

    <main>
        <aside id="sidebar">
            <!-- UMAP controls -->
            <div id="umap-controls">
                <div class="section">
                    <h2>Search</h2>
                    <input id="search-input" type="text" placeholder="Filter classesâ€¦" />
                </div>

                <div class="section">
                    <h2>NP Superclasses</h2>
                    <div id="class-checklist" class="checklist"></div>
                </div>

                <div class="section">
                    <h2>Point Styling</h2>
                    <label>Size
                        <input id="point-size" type="range" min="2" max="12" value="5" />
                    </label>
                    <label>Unselected Opacity
                        <input id="dim-opacity" type="range" min="0" max="0.8" step="0.05" value="0.12" />
                    </label>
                    <label class="toggle">
                        <input id="hide-unselected" type="checkbox" />
                        Hide unselected (instead of dim)
                    </label>
                </div>

                <footer>
                    <small>
                        UMAP CSV: <code>umap_x, umap_y, superclass</code><br />
                        Accuracy CSV: <code>superclass, value[, n]</code><br />
                        Auto-loads from <code>/data/*.csv</code>
                    </small>
                </footer>
            </div>

            <!-- Accuracy controls -->
            <div id="acc-controls">
                <div class="section">
                    <h2>Bar Options</h2>
                    <label class="toggle">
                        <input id="sort-desc" type="checkbox" checked />
                        Sort by value (desc)
                    </label>
                    <label class="toggle">
                        <input id="show-n" type="checkbox" checked />
                        Show sample size in labels
                    </label>
                    <label>
                        Top-K by count
                        <input id="topk" type="number" min="1" max="200" step="1" value="20" />
                    </label>
                </div>
            </div>
        </aside>

        <!-- Split panes; divider appears only when both visible -->
        <section id="panes" class="panes single">
            <div id="pane-umap" class="pane">
                <div id="plot-umap"></div>
                <div id="status-umap" class="panel-status" aria-live="polite"></div>
            </div>

            <div id="divider" class="divider" hidden aria-hidden="true"></div>

            <div id="pane-acc" class="pane" hidden>
                <div id="plot-acc"></div>
                <div id="status-acc" class="panel-status" aria-live="polite"></div>
            </div>

            <div id="pane-blank" class="pane placeholder" hidden aria-hidden="true">
  <div class="placeholder-inner">
    <h3>No plots selected</h3>
    <p>Select a <strong>UMAP</strong> or an <strong>Accuracy</strong> tab above to begin.</p>
  </div>
</div>
        </section>
        <section id="metrics" aria-label="Clustering metrics">
            <h2>Clustering Metrics</h2>

            <div id="metrics-grid">
                <!-- Left: metric selector + plot -->
                <div id="metrics-left">
                    <nav id="metric-tabs" class="tabs sub" role="tablist" aria-label="Metric options">
                        <!-- buttons injected by JS based on selected UMAP -->
                    </nav>
                    <div id="metrics-plot"></div>
                    <div id="metrics-status" class="panel-status" aria-live="polite"></div>
                </div>

                <!-- Right: explanation -->
                <aside id="metrics-right">
                    <div id="metric-desc" class="metric-desc">
                        <em>Select a metric above to see its definition and interpretation.</em>
                    </div>
                </aside>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>

</html>